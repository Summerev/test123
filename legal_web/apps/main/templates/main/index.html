<!-- legal_web/apps/main/templates/main/index.html -->
{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}LegalBot - ë²•ë¥  AI ì–´ì‹œìŠ¤í„´íŠ¸{% endblock %}

{% block content %}
<div class="main-container">
  <!-- ì¢Œì¸¡ ì‚¬ì´ë“œë°” -->
  {% include "chatbot/components/sidebar.html" %}

  <!-- ì¤‘ì•™ ì±„íŒ…ì°½ -->
  {% include "chatbot/components/chat_box.html" %}

  <!-- ìš°ì¸¡ ì •ë³´ íŒ¨ë„ -->
  {% include "chatbot/components/info_panel.html" %}
</div>

<!-- ğŸ”¥ RAG í†µí•©ì„ ìœ„í•œ ì¶”ê°€ ìŠ¤í¬ë¦½íŠ¸ -->
<script>
// í…œí”Œë¦¿ ë³€ìˆ˜ë¥¼ JavaScriptë¡œ ì „ë‹¬
window.TEMPLATE_VARS = {
    userAuthenticated: {% if user.is_authenticated %}true{% else %}false{% endif %},
    userId: {% if user.is_authenticated %}'{{ user.id }}'{% else %}null{% endif %},
    userName: {% if user.is_authenticated %}'{{ user.username }}'{% else %}null{% endif %},
    mode: '{{ mode|default:"default" }}',
    csrfToken: '{{ csrf_token }}'
};

// ì‚¬ìš©ì ì¸ì¦ ìƒíƒœë¥¼ bodyì— í‘œì‹œ (RAG ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©)
document.body.setAttribute('data-user-authenticated', window.TEMPLATE_VARS.userAuthenticated);
if (window.TEMPLATE_VARS.userId) {
    document.body.setAttribute('data-user-id', window.TEMPLATE_VARS.userId);
}
</script>
{% endblock %}